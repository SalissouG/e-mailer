
<!DOCTYPE html>

<html>
    <head>
        <title>Test Jacoop</title>

        <link rel="shortcut icon" type="image/png" href="@routes.Assets.at("images/favicon.png")">
        <script src="@routes.Assets.at("javascripts/jquery-1.9.0.min.js")" type="text/javascript"></script>

         <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
         <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
         <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
         <script>
         $.ajax({
                    type : 'GET',
                    url : "@routes.Application.getMessages()",
                    dataType : "JSON",
                    success : function(data) {
                     for(var i= 0; i< data.length;i++)
                      $('#messages').append('<div class="panel panel-default">'+
                                            '<div class="panel-heading"> <span class="badge" >'+(i+1)+'</span>  '+data[i].destination+'</div>'+
                                            '<div class="panel-body">'+data[i].message +'</div>'+
                                            '</div>'
                                            );

                                             $('#nbr').append(data.length);


                    },
                    error : function(data) {
                      $('#messages').append('error');

                    }
                });
         </script>

         <script>
function openCity(evt, cityName) {
  var i, x, tablinks;
  x = document.getElementsByClassName("city");
  for (i = 0; i < x.length; i++) {
      x[i].style.display = "none";
  }
  tablinks = document.getElementsByClassName("tablink");
  for (i = 0; i < x.length; i++) {
      tablinks[i].className = tablinks[i].className.replace(" w3-red", "");
  }
  document.getElementById(cityName).style.display = "block";
  evt.currentTarget.className += " w3-red";
}
</script>


         <meta name="viewport" content="width=device-width, initial-scale=1">
         <link rel="stylesheet" href="http://www.w3schools.com/lib/w3.css">
         <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.6.3/css/font-awesome.min.css">
      </head>
<body>
  <ul class="w3-navbar w3-black">
    <li><a href="#" class="tablink" onclick="openCity(event, 'nouveau');">Nouveau message</a></li>
    <li><a href="#" class="tablink" onclick="openCity(event, 'messages');">Boîte d’envoi <span class="badge" id="nbr"></span></a> </li>

  </ul>

  <div class="row">
      <div class="col-lg-12">
        &nbsp;
      </div>
  </div>

  <a href="@routes.Application.login" ><span>Login</span></a>

    <div class="row">
        <div class="col-lg-8 col-lg-offset-2">
    <div id="nouveau" class="w3-container w3-border city  " style="display:block">
      <form action="@routes.Application.addMessage()" method="post"   >


            <div class="form-group">
               <label for="destination">Destination:</label>
               <input type="email" class="form-control" id="destination" name="destination">
             </div>

             <div class="form-group">
                <label for="objet">Object:</label>
                <input type="text" class="form-control" id="objet" name="objet">
              </div>


             <div class="form-group">
               <label for="comment">Message:</label>
               <textarea class="form-control" rows="5" name="message"></textarea>
            </div>
            <button  class="btn btn-primary active">ENVOYER</button>

    </form>
  </div>

  <div id="messages" class="w3-container  city" style="display:none">

                   <div  id="messages"></div>

  </div>

  </div>
  </div>
  </body>
</html>
